import{k as U,a4 as re,i as e,c as l,S as T,d as f,a5 as y,a2 as K,N as Y,F as A,a1 as ie,ay as ce,p as ee,P as oe,b as g,D as R,a3 as le,v as de}from"./vendor-a3Xa1DsI.js";import{u as j,ae as ue,af as Q,ag as ge,B as D,ah as x,ai as pe,aj as he,ak as ve,al as fe,am as be,an as me,ao as _e,ap as $e,aq as xe,ar as Ce,b as ke,as as ye,at as O,au as G,av as Se,aw as we,ad as Ee,ax as De,ay as Z,az as Te,aA as J,aB as Ie,aC as Le,aD as Ne,aE as Pe,aF as Ae,aG as Fe}from"./index-VFGWuzyL.js";import{C as S}from"./ConfigTitle-16Ckjtoe.js";const Be=f('<div class="flex flex-col p-4">'),Re=f('<div class="flex flex-col"><form class="flex gap-2 sm:flex-row"><input type=search name=name class="input input-bordered min-w-0 flex-1"placeholder=google.com><div class="flex items-center gap-2"><select name=type class="select select-bordered"><option>A</option><option>AAAA</option><option>MX'),je=f("<div class=py-2>"),Oe=f('<form class="grid grid-cols-3 gap-2 sm:grid-cols-5">'),Ge=f('<div class="grid grid-cols-2 gap-2 sm:grid-cols-4"><div class=form-control><label for=enable-allow-lan class="label gap-2"><span class=label-text></span></label><input id=enable-allow-lan type=checkbox class=toggle></div><div class=form-control><label for=enable-tun-device class="label gap-2"><span class=label-text></span></label><input id=enable-tun-device type=checkbox class=toggle></div><div class=form-control><label for=tun-ip-stack class="label gap-2"><span class=label-text></span></label><select id=tun-ip-stack class="select select-bordered flex-1"><option>Mixed</option><option>gVisor</option><option>System</option><option>LWIP</option></select></div><div class=form-control><label for=device-name class="label gap-2"><span class=label-text></span></label><input id=device-name class="input input-bordered min-w-0"></div><div class=form-control><label for=interface-name class="label gap-2"><span class=label-text></span></label><input id=interface-name class="input input-bordered min-w-0">'),Me=f('<div class="flex flex-col gap-4"><select class="select select-bordered"><option></option><option></option><option></option></select><div class="grid grid-cols-2 gap-2 sm:grid-cols-3">'),Qe=f('<div class=form-control><label class=label><span class=label-text></span></label><input type=number class="input input-bordered">'),Ue=f('<div class="flex flex-col gap-2"><div class="flex flex-col"><select class="select select-bordered"></select></div><div class="flex flex-col"><select class="select select-bordered">'),Ve=f('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2"><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><input type=checkbox class=toggle></div><div class="flex flex-col"><select class="select select-bordered"></select></div></div><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><input type=checkbox class=toggle>'),M=f("<option>"),qe=f('<span class="absolute -right-1 -top-1 flex h-3 w-3"><span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-info opacity-75"></span><span class="inline-flex h-3 w-3 rounded-full bg-info">'),ze=f('<div class="grid grid-cols-2 gap-4"><kbd class=kbd></kbd><div class=relative><kbd class="kbd w-full">'),He=f('<div class="mx-auto flex max-w-screen-md flex-col gap-4">'),Xe=y.object({name:y.string(),type:y.string()}),We=()=>{const[s]=j(),t=ge(),{form:_,isSubmitting:r}=K({extend:le({schema:Xe}),onSubmit:h=>t.get("dns/query",{searchParams:{name:h.name,type:h.type}}).json().then(({Answer:i})=>C((i==null?void 0:i.map(({data:o})=>o))||[])).catch(i=>de.error(i.message))}),[b,C]=U([]);return(()=>{const h=Re(),i=h.firstChild,o=i.firstChild,n=o.nextSibling;return n.firstChild,Y(_,i,()=>_),e(n,l(D,{type:"submit",class:"btn-primary",get loading(){return r()},get children(){return s("dnsQuery")}}),null),e(h,l(T,{get when(){return b().length>0},get children(){const $=Be();return e($,l(A,{get each(){return b()},children:d=>(()=>{const p=je();return e(p,d),p})()})),$}}),null),h})()},Ze=y.object({port:y.number(),"socks-port":y.number(),"redir-port":y.number(),"tproxy-port":y.number(),"mixed-port":y.number()}),Je=({backendVersion:s})=>{const[t]=j(),_=ie(),r=[{label:()=>t("port",{name:"HTTP"}),key:"port",onChange:n=>void x("port",Number(n.target.value),o)},{label:()=>t("port",{name:"Socks"}),key:"socks-port",onChange:n=>void x("socks-port",Number(n.target.value),o)},{label:()=>t("port",{name:"Redir"}),key:"redir-port",onChange:n=>void x("redir-port",Number(n.target.value),o)},{label:()=>t("port",{name:"TProxy"}),key:"tproxy-port",onChange:n=>void x("tproxy-port",Number(n.target.value),o)},{label:()=>t("port",{name:"Mixed"}),key:"mixed-port",onChange:n=>void x("mixed-port",Number(n.target.value),o)}],{form:b,setInitialValues:C,reset:h}=K({extend:le({schema:Ze})}),[i,{refetch:o}]=ce(Fe);return ee(()=>{const n=i();n&&(C(n),h())}),(()=>{const n=Me(),$=n.firstChild,d=$.firstChild,p=d.nextSibling,w=p.nextSibling,k=$.nextSibling;return $.addEventListener("change",u=>void x("mode",u.target.value,o)),e(d,()=>t("global")),e(p,()=>t("rule")),e(w,()=>t("direct")),e(n,l(T,{get when(){return!Q(s())},get children(){return[(()=>{const u=Oe();return Y(b,u,()=>b),e(u,l(A,{each:r,children:c=>(()=>{const v=Qe(),I=v.firstChild,F=I.firstChild,E=I.nextSibling;return e(F,()=>c.label()),oe(E,"change",c.onChange),g(m=>{const B=c.key,L=c.key,N=c.key,P=c.label();return B!==m._v$&&R(I,"for",m._v$=B),L!==m._v$2&&R(E,"id",m._v$2=L),N!==m._v$3&&R(E,"name",m._v$3=N),P!==m._v$4&&R(E,"placeholder",m._v$4=P),m},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),v})()})),u})(),(()=>{const u=Ge(),c=u.firstChild,v=c.firstChild,I=v.firstChild,F=v.nextSibling,E=c.nextSibling,m=E.firstChild,B=m.firstChild,L=m.nextSibling,N=E.nextSibling,P=N.firstChild,te=P.firstChild,V=P.nextSibling,q=N.nextSibling,z=q.firstChild,ae=z.firstChild,H=z.nextSibling,ne=q.nextSibling,X=ne.firstChild,se=X.firstChild,W=X.nextSibling;return e(I,()=>t("allowLan")),F.addEventListener("change",a=>void x("allow-lan",a.target.checked,o)),e(B,()=>t("enableTunDevice")),L.addEventListener("change",a=>void x("tun",{enable:a.target.checked},o)),e(te,()=>t("tunModeStack")),V.addEventListener("change",a=>void x("tun",{stack:a.target.value},o)),e(ae,()=>t("tunDeviceName")),H.addEventListener("change",a=>void x("tun",{device:a.target.value},o)),e(se,()=>t("interfaceName")),W.addEventListener("change",a=>void x("interface-name",a.target.value,o)),g(()=>{var a;return F.checked=(a=i())==null?void 0:a["allow-lan"]}),g(()=>{var a;return L.checked=(a=i())==null?void 0:a.tun.enable}),g(()=>{var a;return V.value=(a=i())==null?void 0:a.tun.stack}),g(()=>{var a;return H.value=(a=i())==null?void 0:a.tun.device}),g(()=>{var a;return W.value=(a=i())==null?void 0:a["interface-name"]}),u})()]}}),k),e(k,l(D,{class:"btn-primary",get loading(){return pe()},onClick:he,get children(){return t("reloadConfig")}}),null),e(k,l(D,{class:"btn-secondary",get loading(){return ve()},onClick:fe,get children(){return t("updateGEODatabases")}}),null),e(k,l(D,{class:"btn-accent",get loading(){return be()},onClick:me,get children(){return t("flushFakeIP")}}),null),e(k,l(T,{get when(){return!Q(s())},get children(){return l(D,{class:"btn-error",get loading(){return _e()},onClick:$e,get children(){return t("upgradeCore")}})}}),null),e(k,l(D,{class:"btn-warning",get loading(){return xe()},onClick:Ce,get children(){return t("restartCore")}}),null),e(k,l(D,{class:"btn-info",onClick:()=>{ke(""),_(ye.Setup)},get children(){return t("switchEndpoint")}}),null),g(()=>{var u;return $.value=(u=i())==null?void 0:u.mode}),g(()=>d.value=O.Global),g(()=>p.value=O.Rule),g(()=>w.value=O.Direct),n})()},Ke=()=>{const[s]=j(),t=[{label:()=>s("en"),value:G.EN},{label:()=>s("zh"),value:G.ZH},{label:()=>s("vi"),value:G.VI}];return(()=>{const _=Ve(),r=_.firstChild,b=r.firstChild,C=b.firstChild,h=b.nextSibling,i=h.firstChild,o=r.nextSibling,n=o.firstChild,$=n.firstChild;return e(b,l(S,{get children(){return s("useTwemoji")}}),C),C.addEventListener("change",d=>Se(d.target.checked)),e(h,l(S,{get children(){return s("switchLanguage")}}),i),i.addEventListener("change",d=>we(d.target.value)),e(i,l(A,{each:t,children:d=>(()=>{const p=M();return e(p,()=>d.label()),g(()=>p.selected=Ee()===d.value),g(()=>p.value=d.value),p})()})),e(n,l(S,{get children(){return s("autoSwitchTheme")}}),$),$.addEventListener("change",d=>De(d.target.checked)),e(o,l(T,{get when(){return Z()},get children(){const d=Ue(),p=d.firstChild,w=p.firstChild,k=p.nextSibling,u=k.firstChild;return e(p,l(S,{get children(){return s("favDayTheme")}}),w),w.addEventListener("change",c=>Te(c.target.value)),e(w,l(A,{each:J,children:c=>(()=>{const v=M();return v.value=c,e(v,c),v})()})),e(k,l(S,{get children(){return s("favNightTheme")}}),u),u.addEventListener("change",c=>Ie(c.target.value)),e(u,l(A,{each:J,children:c=>(()=>{const v=M();return v.value=c,e(v,c),v})()})),g(()=>w.value=Le()),g(()=>u.value=Ne()),d}}),null),g(()=>C.checked=Pe()),g(()=>$.checked=Z()),_})()},Ye=({backendVersion:s})=>{const[t,_]=U(!1);return ee(async()=>{const r=s();r&&_(await Ae(r))}),(()=>{const r=ze(),b=r.firstChild,C=b.nextSibling,h=C.firstChild;return e(b,()=>"1.134.0"),e(C,l(T,{get when(){return t()},get children(){return qe()}}),h),e(h,s),r})()},al=()=>{const[s]=j(),[t,_]=U("");return re(async()=>{_(await ue())}),(()=>{const r=He();return e(r,l(T,{get when(){return!Q(t())},get children(){return[l(S,{withDivider:!0,get children(){return s("dnsQuery")}}),l(We,{})]}}),null),e(r,l(S,{withDivider:!0,get children(){return s("coreConfig")}}),null),e(r,l(Je,{backendVersion:t}),null),e(r,l(S,{withDivider:!0,get children(){return s("xdConfig")}}),null),e(r,l(Ke,{}),null),e(r,l(S,{withDivider:!0,get children(){return s("version")}}),null),e(r,l(Ye,{backendVersion:t}),null),r})()};export{al as default};
